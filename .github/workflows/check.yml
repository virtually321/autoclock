name: 极简打卡系统
on: 
  schedule: 
    - cron: '0 0,8 * * *'  # 北京时间8点/16点
  push: 
    paths: [duty, leave]    # 文件变更实时触发

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    - name: 生成状态
      run: |
        # 精准日期匹配 + 实时接口查询
        grep -qxF "$(date +%F)" duty leave && echo 1 || curl -sf "https://yasumi.neko7ina.com/" > status

    - uses: stefanzweifel/git-auto-commit-action@v5
      with:
        commit_message: "系统自动更新"
