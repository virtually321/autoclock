name: auto_update

on:
  # æ”¯æŒUTC 16ç‚¹ & æ¬¡æ—¥UTC5ç‚¹ï¼ˆå¯¹åº”åŒ—äº¬æ—¶é—´ï¼‰
  schedule:
    - cron: '0 8 * * *'
    - cron: '0 21 * * *'
  workflow_dispatch:           # æ”¯æŒæ‰‹åŠ¨è°ƒè¯•
  push:
    branches:
      - main
    paths:
      - 'zb.txt'
      - 'xj.txt'
      - 'check_status.py'

jobs:
  update_status:
    runs-on: ubuntu-latest
    steps:
      # 1. é«˜çº§checkout + æ‹‰å–å†å²
      - name: ğŸ§¾ æ‹‰å–æœ€æ–°ä»“åº“ï¼ˆæœ€å¤§å…¼å®¹ï¼‰  
        uses: actions/checkout@v4
        with:
          ref: main
          fetch-depth: 0            # è·å–å®Œæ•´å†å²ï¼ˆå¿…éœ€ç”¨äº git pullï¼‰
          path: .                   # ä¸»åˆ†æ”¯ç»å¯¹è·¯å¾„

      # 2. å®‰è£… Python/Torch/Runtime
      - name: ğŸ§ª é…ç½® Python 3.8 ç¯å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.8'

      # 3. æ‰§è¡Œè„šæœ¬ï¼ˆè¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼‰
      - name: ğŸ¤– è¿è¡ŒçŠ¶æ€æ£€æŸ¥é€»è¾‘
        run: |
          echo "ğŸ” å½“å‰ç›®å½•ç»“æ„ï¼š"
          ls -la

          echo "ğŸ•‘ å¼€å§‹è¿è¡Œè„šæœ¬..."
          python3 check_status.py

          echo "ğŸ“œ
