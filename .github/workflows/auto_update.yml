name: auto_update

on:
  # 支持UTC 16点 & 次日UTC5点（对应北京时间）
  schedule:
    - cron: '0 8 * * *'
    - cron: '0 21 * * *'
  workflow_dispatch:           # 支持手动调试
  push:
    branches:
      - main
    paths:
      - 'zb.txt'
      - 'xj.txt'
      - 'check_status.py'

jobs:
  update_status:
    runs-on: ubuntu-latest
    steps:
      # 1. 高级checkout + 拉取历史
      - name: 🧾 拉取最新仓库（最大兼容）  
        uses: actions/checkout@v4
        with:
          ref: main
          fetch-depth: 0            # 获取完整历史（必需用于 git pull）
          path: .                   # 主分支绝对路径

      # 2. 安装 Python/Torch/Runtime
      - name: 🧪 配置 Python 3.8 环境
        uses: actions/setup-python@v4
        with:
          python-version: '3.8'

      # 3. 执行脚本（输出详细日志）
      - name: 🤖 运行状态检查逻辑
        run: |
          echo "🔍 当前目录结构："
          ls -la

          echo "🕑 开始运行脚本..."
          python3 check_status.py

          echo "📜
