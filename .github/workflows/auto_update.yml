name: è‡ªåŠ¨æ›´æ–°å€¼ç­çŠ¶æ€

on:
  schedule:
    - cron: '0 8 * * *'   # UTC 8ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´16ç‚¹ï¼‰
    - cron: '0 21 * * *' # UTC 21ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´5ç‚¹ï¼‰
  workflow_dispatch:
  push:
    branches:
      - main
    paths:
      - zb.txt
      - xj.txt
      - check_status.py

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ§¾ æ‹‰å–ä»£ç 
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ğŸ”§ å®‰è£…Pythonç¯å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: ğŸ”„ æ£€æŸ¥çŠ¶æ€é€»è¾‘
        run: |
          echo "ğŸ›  å¼€å§‹æ‰§è¡ŒçŠ¶æ€åˆ¤å®š"
          python check_status.py || echo "âš ï¸ ç”¨æœ€åä¸€æ¬¡ç¼“å­˜å†™å…¥æˆ– fallback"

      - name: ğŸ“¡ æäº¤ status.txt ï¼ˆä»…å½“å†…å®¹å˜åŒ–ï¼‰
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'status.txt'
          commit_message: 'ğŸ” ä»Šæ—¥çŠ¶æ€ï¼š$(cat status.txt)'
          author: DutyBot <github-actions@github.com>
       
